{
  "hooks": {
    "PreToolUse": [
      {
        "matcher": "Bash",
        "hooks": [
          {
            "type": "prompt",
            "prompt": "MISE-FIRST ENFORCEMENT: Before running this command, check if it violates mise-first patterns:\n\n1. BLOCK: pip install → Use 'uv pip install' or 'uvx' instead\n2. BLOCK: npm install (for global tools) → Use 'mise use npm:<pkg>@latest' or 'bun add'\n3. WARN: brew install <runtime> → Use 'mise use <runtime>@latest' for node/python/go/rust\n4. WARN: nvm/pyenv/rbenv commands → Migrate to mise\n\nIf the command violates these patterns, suggest the mise-first alternative. Only proceed if user confirms or command is compliant."
          }
        ]
      },
      {
        "matcher": "Write",
        "hooks": [
          {
            "type": "prompt",
            "prompt": "MULTI-AGENT CODE REVIEW REQUIREMENT: You are about to write code. After completing this write operation, you MUST invoke a code-reviewer agent (pr-review-toolkit:code-reviewer or tdd-workflows:code-reviewer) before committing. Track this requirement mentally and ensure review happens."
          }
        ]
      },
      {
        "matcher": "Edit",
        "hooks": [
          {
            "type": "prompt",
            "prompt": "MULTI-AGENT CODE REVIEW REQUIREMENT: You are about to edit code. After completing substantive edits (not typos/formatting), you MUST invoke a code-reviewer agent before committing. Track this requirement mentally and ensure review happens."
          }
        ]
      },
      {
        "matcher": "Task",
        "hooks": [
          {
            "type": "command",
            "command": "bash scripts/multi-agent-metrics.sh track agent_invoked 2>/dev/null || true"
          }
        ]
      }
    ],
    "SessionStart": [
      {
        "hooks": [
          {
            "type": "command",
            "command": "bash scripts/claude-health-check.sh 2>/dev/null || echo 'Health check skipped'"
          },
          {
            "type": "command",
            "command": "bash scripts/session-startup.sh 2>/dev/null || cat conductor/tracks.md 2>/dev/null | head -20 || echo 'No active tracks'"
          },
          {
            "type": "command",
            "command": "bash scripts/preserve-context.sh --status 2>/dev/null || echo 'Context status unavailable'"
          }
        ]
      }
    ],
    "UserPromptSubmit": [
      {
        "hooks": [
          {
            "type": "prompt",
            "prompt": "MULTI-AGENT WORKFLOW ENFORCEMENT: Before responding, consider if this task requires parallel subagents. For research tasks, use Explore agents. For code changes, plan to invoke code-reviewer and test-automator agents. For validation, launch multiple validators in parallel. Skip multi-agent only for trivial tasks (single file reads, direct questions with known answers). See .claude/rules/multi-agent-workflow.md for requirements."
          }
        ]
      }
    ],
    "PreCompact": [
      {
        "hooks": [
          {
            "type": "command",
            "command": "bash scripts/preserve-context.sh --save 2>/dev/null || echo 'Context preservation skipped'"
          },
          {
            "type": "prompt",
            "prompt": "CONTEXT PRESERVATION: Before compaction, ensure you have updated .claude/SESSION_HANDOFF.md with: 1) Current task status, 2) Key decisions made, 3) Files modified, 4) Next steps for resumption. This ensures continuity across sessions."
          }
        ]
      }
    ],
    "PostToolUse": [
      {
        "matcher": "Bash",
        "hooks": [
          {
            "type": "command",
            "command": "bash -c 'CMD=\"$CLAUDE_TOOL_INPUT\"; if echo \"$CMD\" | grep -qE \"pip install\" && ! echo \"$CMD\" | grep -qE \"uv pip\"; then bash scripts/mise-metrics.sh track pip_violation \"$CMD\" 2>/dev/null; elif echo \"$CMD\" | grep -qE \"npm install -g|npm i -g\"; then bash scripts/mise-metrics.sh track npm_violation \"$CMD\" 2>/dev/null; elif echo \"$CMD\" | grep -qE \"^nvm |^pyenv |^rbenv |^goenv \"; then bash scripts/mise-metrics.sh track legacy_violation \"$CMD\" 2>/dev/null; elif echo \"$CMD\" | grep -qE \"mise install\"; then bash scripts/mise-metrics.sh track mise_install 2>/dev/null; elif echo \"$CMD\" | grep -qE \"mise use\"; then bash scripts/mise-metrics.sh track mise_use 2>/dev/null; elif echo \"$CMD\" | grep -qE \"^uv |^uvx \"; then bash scripts/mise-metrics.sh track uv_usage 2>/dev/null; elif echo \"$CMD\" | grep -qE \"^bun \"; then bash scripts/mise-metrics.sh track bun_usage 2>/dev/null; fi' 2>/dev/null || true"
          }
        ]
      },
      {
        "matcher": "Write",
        "hooks": [
          {
            "type": "command",
            "command": "bash scripts/multi-agent-metrics.sh track code_change_no_review 2>/dev/null || true"
          },
          {
            "type": "prompt",
            "prompt": "CODE CHANGE RECORDED: A file was written. Remember: You MUST invoke code-reviewer agent before committing. Use 'bash scripts/multi-agent-metrics.sh track code_change_reviewed' after review completes to clear the pending review status."
          }
        ]
      },
      {
        "matcher": "Edit",
        "hooks": [
          {
            "type": "command",
            "command": "bash scripts/multi-agent-metrics.sh track code_change_no_review 2>/dev/null || true"
          },
          {
            "type": "prompt",
            "prompt": "CODE CHANGE RECORDED: A file was edited. Remember: You MUST invoke code-reviewer agent before committing. Use 'bash scripts/multi-agent-metrics.sh track code_change_reviewed' after review completes to clear the pending review status."
          }
        ]
      },
      {
        "matcher": "Task",
        "hooks": [
          {
            "type": "command",
            "command": "bash -c 'AGENT=\"$CLAUDE_TOOL_INPUT\"; if echo \"$AGENT\" | grep -qiE \"code-reviewer|review\"; then bash scripts/multi-agent-metrics.sh track code_change_reviewed 2>/dev/null; fi' || true"
          }
        ]
      }
    ]
  },
  "enabledPlugins": {
    "frontend-design@claude-plugins-official": true,
    "github@claude-plugins-official": true,
    "code-review@claude-plugins-official": true,
    "feature-dev@claude-plugins-official": true,
    "commit-commands@claude-plugins-official": true,
    "pr-review-toolkit@claude-plugins-official": true,
    "plugin-dev@claude-plugins-official": true,
    "ralph-loop@claude-plugins-official": true,
    "clangd-lsp@claude-plugins-official": true,
    "circleback@claude-plugins-official": true,
    "code-simplifier@claude-plugins-official": true,
    "hookify@claude-plugins-official": true,
    "agent-orchestration@claude-code-workflows": true,
    "api-scaffolding@claude-code-workflows": true,
    "cicd-automation@claude-code-workflows": true,
    "developer-essentials@claude-code-workflows": true,
    "llm-application-dev@claude-code-workflows": true,
    "python-development@claude-code-workflows": true,
    "systems-programming@claude-code-workflows": true,
    "documentation-generation@claude-code-workflows": true,
    "tdd-workflows@claude-code-workflows": true,
    "api-testing-observability@claude-code-workflows": true,
    "backend-development@claude-code-workflows": true,
    "kubernetes-operations@claude-code-workflows": true,
    "observability-monitoring@claude-code-workflows": true,
    "full-stack-orchestration@claude-code-workflows": true,
    "code-documentation@claude-code-workflows": true,
    "debugging-toolkit@claude-code-workflows": true,
    "git-pr-workflows@claude-code-workflows": true,
    "frontend-mobile-development@claude-code-workflows": true,
    "unit-testing@claude-code-workflows": true,
    "code-review-ai@claude-code-workflows": true,
    "cloud-infrastructure@claude-code-workflows": true,
    "incident-response@claude-code-workflows": true,
    "javascript-typescript@claude-code-workflows": true,
    "code-refactoring@claude-code-workflows": true,
    "dependency-management@claude-code-workflows": true,
    "error-debugging@claude-code-workflows": true,
    "context-management@claude-code-workflows": true,
    "machine-learning-ops@claude-code-workflows": true,
    "data-engineering@claude-code-workflows": true,
    "data-validation-suite@claude-code-workflows": true,
    "database-design@claude-code-workflows": true,
    "database-migrations@claude-code-workflows": true,
    "error-diagnostics@claude-code-workflows": true,
    "distributed-debugging@claude-code-workflows": true,
    "application-performance@claude-code-workflows": true,
    "database-cloud-optimization@claude-code-workflows": true,
    "deployment-strategies@claude-code-workflows": true,
    "deployment-validation@claude-code-workflows": true,
    "framework-migration@claude-code-workflows": true,
    "codebase-cleanup@claude-code-workflows": true,
    "functional-programming@claude-code-workflows": true,
    "accessibility-compliance@claude-code-workflows": true,
    "context7@claude-plugins-official": true,
    "agent-sdk-dev@claude-plugins-official": true,
    "pyright-lsp@claude-plugins-official": true,
    "playwright@claude-plugins-official": true,
    "explanatory-output-style@claude-plugins-official": true,
    "slack@claude-plugins-official": true,
    "gopls-lsp@claude-plugins-official": true,
    "c4-architecture@claude-code-workflows": true,
    "multi-platform-apps@claude-code-workflows": true,
    "reverse-engineering@claude-code-workflows": true,
    "learning-output-style@claude-plugins-official": true,
    "typescript-lsp@claude-plugins-official": true,
    "security-guidance@claude-plugins-official": true,
    "comprehensive-review@claude-code-workflows": true,
    "frontend-mobile-security@claude-code-workflows": true,
    "shell-scripting@claude-code-workflows": true,
    "performance-testing-review@claude-code-workflows": true,
    "team-collaboration@claude-code-workflows": true,
    "web-scripting@claude-code-workflows": true,
    "security-scanning@claude-code-workflows": true,
    "security-compliance@claude-code-workflows": true,
    "backend-api-security@claude-code-workflows": true,
    "jvm-languages@claude-code-workflows": true,
    "blockchain-web3@claude-code-workflows": true,
    "quantitative-trading@claude-code-workflows": true,
    "payment-processing@claude-code-workflows": true,
    "game-development@claude-code-workflows": true,
    "business-analytics@claude-code-workflows": true,
    "startup-business-analyst@claude-code-workflows": true,
    "hr-legal-compliance@claude-code-workflows": true,
    "seo-content-creation@claude-code-workflows": true,
    "seo-technical-optimization@claude-code-workflows": true,
    "seo-analysis-monitoring@claude-code-workflows": true,
    "content-marketing@claude-code-workflows": true,
    "customer-sales-automation@claude-code-workflows": true,
    "arm-cortex-microcontrollers@claude-code-workflows": true,
    "julia-development@claude-code-workflows": true,
    "rust-analyzer-lsp@claude-plugins-official": true
  }
}
